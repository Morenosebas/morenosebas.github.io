---
const slides = Astro.props.slides as {
  title: string;
  description: string;
  image: string;
}[];
const { class: classNames } = Astro.props;
console.log(classNames)
---

<section class:list={[classNames]}>
  <div class="md:max-w-[600px] max-h-[700px] relative">
    <div
      class="slider aspect-video flex overflow-hidden snap-mandatory snap-x scroll-smooth w-full h-full border-2"
    >
      {
        slides.map((slide, index) => {
          return (
            <div
              class="slide flex-grow-[1] flex-shrink-[0] basis-[100%] w-full h-full grid grid-flow-col p-5 gap-3 "
              id={"slider-" + index}
            >
              <img
                src={slide.image}
                alt={slide.title}
                class="object-contain w-full h-full"
              />
              <div class="slide-content">
                <h2>{slide.title}</h2>
                <p>{slide.description}</p>
              </div>
            </div>
          );
        })
      }
    </div>
    <div
      class="slider-nav flex absolute bottom-[20px] left-[50%] translate-x-[-50%] z-20 gap-2"
    >
      {
        slides.map((slide, index) => {
          return (
            <a
              class="slider-button w-[10px] h-[10px] bg-dark rounded-full "
              aria-label={`Go to slide ${index + 1}`}
              aria-current={index === 0 ? "true" : "false"}
              href={"#slider-" + index}
              id={"btnSlider-" + index}
            />
          );
        })
      }
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const buttons = document.querySelectorAll(".slider-button");

      buttons.forEach((button) => {
        button.addEventListener("click", (event) => {
          buttons.forEach((btn) => {
            btn.classList.remove("bg-white");
            btn.classList.add("bg-dark");
          });
          if (event.currentTarget) {
            const currentButton = event.currentTarget as HTMLAnchorElement;
            if (currentButton) {
              currentButton.classList.add("bg-white");
            }
          }
        });
      });
    });
  </script>
</section>
